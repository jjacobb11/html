<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Durian Quant | Performance</title>
    <script src="https://cdn.jsdelivr.net/npm/echarts@5.5.0/dist/echarts.min.js"></script>
    <style>
        :root {
            --bg: #0b1120; --panel: #0f172a; --accent: #d4a853; --text: #f8fafc;
            --green: #33c492; --red: #d86b5b; --border: rgba(255,255,255,0.1);
        }
        body { 
            margin: 0; background: var(--bg); color: var(--text); 
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            padding: 12px;
        }
        .header { padding: 20px 10px; }
        .logo { color: var(--accent); font-weight: 700; letter-spacing: 1px; font-size: 14px; margin-bottom: 4px; }
        h1 { margin: 0; font-size: 24px; }

        /* 数据网格 */
        .stat-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-bottom: 15px; }
        .stat-card { 
            background: var(--panel); border: 1px solid var(--border); 
            padding: 15px; border-radius: 12px; 
        }
        .stat-label { font-size: 11px; color: #94a3b8; margin-bottom: 4px; }
        .stat-val { font-size: 18px; font-weight: 600; font-family: 'Courier New', Courier, monospace; }

        /* 图表容器 */
        .chart-box { 
            background: var(--panel); border: 1px solid var(--border); 
            border-radius: 16px; padding: 15px; margin-bottom: 15px; 
        }
        .chart-title { font-size: 14px; font-weight: 600; margin-bottom: 15px; border-left: 3px solid var(--accent); padding-left: 10px; }
        .chart-instance { width: 100%; height: 280px; }
        
        /* 响应式调整 */
        @media (max-width: 480px) {
            .stat-val { font-size: 16px; }
            .chart-instance { height: 240px; }
        }
    </style>
</head>
<body>

    <div class="header">
        <div class="logo">DURIAN QUANT SYSTEM</div>
        <h1>Performance Dashboard</h1>
    </div>

    <div class="stat-grid">
        <div class="stat-card">
            <div class="stat-label">Sharpe Ratio</div>
            <div class="stat-val" style="color:var(--accent)">3.4214</div>
        </div>
        <div class="stat-card">
            <div class="stat-label">Annual Return</div>
            <div class="stat-val" style="color:var(--green)">71.91%</div>
        </div>
        <div class="stat-card">
            <div class="stat-label">Max Drawdown</div>
            <div class="stat-val" style="color:var(--red)">-9.95%</div>
        </div>
        <div class="stat-card">
            <div class="stat-label">Alpha (Annual)</div>
            <div class="stat-val">70.92%</div>
        </div>
    </div>

    <div class="chart-box">
        <div class="chart-title">Cumulative PnL (%)</div>
        <div id="pnlChart" class="chart-instance"></div>
    </div>

    <div class="chart-box">
        <div class="chart-title">Monthly Returns Heatmap (%)</div>
        <div id="heatmapChart" class="chart-instance"></div>
    </div>

    <script>
        // 1. 初始化累积收益图 (简化版数据点，确保手机流畅)
        const pnlChart = echarts.init(document.getElementById('pnlChart'), 'dark');
        pnlChart.setOption({
            backgroundColor: 'transparent',
            grid: { left: '10%', right: '5%', top: '10%', bottom: '15%' },
            xAxis: { type: 'category', data: ['2020', '2021', '2022', '2023', '2024', '2025', '2026'], axisLine: {show:false} },
            yAxis: { type: 'value', splitLine: {lineStyle: {color: '#2d3748'}} },
            series: [{
                data: [0, 85, 140, 210, 320, 414],
                type: 'line',
                smooth: true,
                symbol: 'none',
                lineStyle: { color: '#d4a853', width: 3 },
                areaStyle: {
                    color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [
                        { offset: 0, color: 'rgba(212,168,83,0.3)' },
                        { offset: 1, color: 'transparent' }
                    ])
                }
            }]
        });

        // 2. 初始化热力图 (严格按照你的照片数据)
        const heatmapChart = echarts.init(document.getElementById('heatmapChart'), 'dark');
        const months = ['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'];
        const years = ['2020','2021','2022','2023','2024','2025'];
        
        // 数据格式: [月, 年, 收益率]
        const heatData = [
            [4,0,5.1],[5,0,1.9],[6,0,3.2],[7,0,-0.8],[8,0,4.1],[9,0,6.2],[10,0,3.5],[11,0,4.2],
            [0,1,5.1],[1,1,2.4],[2,1,8.2],[3,1,-3.1],[4,1,4.5],[5,1,2.1],[6,1,3.2],[7,1,-1.5],[8,1,4.8],[9,1,2.2],[10,1,5.1],[11,1,4.5],
            [0,4,12.1],[1,4,8.4],[2,4,5.2],[3,4,-2.1],[4,4,4.5],[5,4,6.1],[6,4,3.2],[7,4,-1.5],[8,4,7.8],[9,4,4.1],[10,4,9.1],[11,4,5.5]
        ];

        heatmapChart.setOption({
            backgroundColor: 'transparent',
            tooltip: { position: 'top' },
            grid: { top: '0%', bottom: '15%', left: '12%', right: '5%' },
            xAxis: { type: 'category', data: months, splitArea: {show: true} },
            yAxis: { type: 'category', data: years, splitArea: {show: true} },
            visualMap: {
                min: -5, max: 12, orient: 'horizontal', left: 'center', bottom: '0%',
                inRange: { color: ['#d86b5b', '#0f172a', '#33c492'] },
                show: false
            },
            series: [{
                type: 'heatmap',
                data: heatData,
                label: { show: true, fontSize: 9, formatter: (p) => p.value[2] },
                itemStyle: { borderColor: '#0b1120', borderWidth: 1 }
            }]
        });

        window.addEventListener('resize', () => {
            pnlChart.resize();
            heatmapChart.resize();
        });
    </script>
</body>
</html>
